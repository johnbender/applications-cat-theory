<!DOCTYPE HTML>
<html>
  <head>
    <link rel="stylesheet" href="css/bootstrap.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="css/font-awesome.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="css/poster.css" type="text/css" media="screen" />
    <script type="text/javascript" src="prettify.js"></script>
  </head>
  <body onload="prettyPrint()">
    <div id="title">
      <h1>Automatically Suggesting Performance Optimizations in jQuery Based JavaScript Applications</h1>
    </div>
    <div id="content">
      <div id="left">
        <div class="row-fluid">
          <h2 class="span12">The Chains That Bind</h2>
        </div>
        <div class="row-fluid border-right">
          <div id="jquery-piechart" class="span4">
	          <div class="figure img-figure">Figure 1</div>
	          <img src="img/top-10k-bar.png" style="float: right; margin-top: 60px"/>
          </div>
          <div id="piechart-caption" class="span8 text-block">
            <h3><span class="icon-th"></span>Ubiquity Thy Name is jQuery</h3><p>jQuery is an extremely popular open source JavaScript library, dual licensed under the GPL and MIT licenses. Figure 1 shows the percentage use of jQuery among the top ten thousand, hundred thousand, and one millions websites on the internet as ranked by Alexa [!!]. Additionally the project's website sees more than one hundred thousand [!!] unique visits a month from developers all over the world. Given these numbers it's fair to say that jQuery is one of the most popular libraries available to JavaScript developers, and possibly one of the most popular open source libraries available to any developer.</p>

<p>This popularity is due in part to the fluent interface that the library promotes for manipulating the browser's document object model. As with many abstractions that simplify complex data manipulation it often requires performance tradeoffs. Here we identify a subset of chainable jQuery methods that can be fused in the interest of increasing performance. As a result we derive a simple jQuery extension that can assist developers in identifying when these methods are being used.</p>
          </div>
        </div>
        <div class="row-fluid" style="display: none">
          <div class="span12">
            <pre class="large prettyprint linenums">
jQuery( <span class="string">"div"</span> ).hide().addClass( <span class="string">"foo"</span> ).show();</pre>
          </div>
        </div>
        <div class="row-fluid border-left">
          <div id="explain-chaining" class="span4 text-block">
	    <h3><span class="icon-user"></span>Fluent Interface</h3><p>In Figure 2 you can see an example of a typical DOM manipulation built using jQuery's chainable methods. In this case all the <code>HTMLDivElement</code>s are selected from the DOM, hidden, the <code>foo</code> CSS class is added, and they are shown again. Figure 3 shows a "deabstracted" naive implementation of the method chain from Figure 2, and, as you can see, iterating over the set three times where one would seemingly suffice suggests an opportunity for a performance improvement.</p>

<p>Internally these methods are implemented using for loops or in one of two forms supported by the library, the map form with <code>jQuery.map</code> and the each form with <code>jQuery.each</code>.</p>
          </div>
          <div id="for-loops" class="span8">
            <pre class="prettyprint linenums first-stack">jQuery( <span class="string">"div"</span> ).hide().addClass( <span class="string">"foo"</span> ).show();<div class="figure">Figure 2</div></pre>

            <pre class="prettyprint linenums">
<span class="keyword">var</span> <span class="variable-name">$divs</span> = $( <span class="string">"div"</span> );

<span class="keyword">for</span>( <span class="keyword">var</span> <span class="variable-name">i</span> = 0; i &lt;= length; i++ ) {
  $divs[i].setAttribute( <span class="string">"style"</span>, <span class="string">"display: none;"</span> );
}

<span class="keyword">for</span>( i = 0; i &lt;= length; i++ ) {
  $divs[i].setAttribute( <span class="string">"class"</span>, <span class="string">"foo"</span> );
}

<span class="keyword">for</span>( i = 0; i &lt;= length; i++ ) {
  $divs[i].setAttribute( <span class="string">"style"</span>, <span class="string">"display: block;"</span> );
}<div class="figure">Figure 3</div>
</pre>
          </div>
        </div>
        <div class="row-fluid border-left">
          <div id="map-form-content" class="span6">
            <div class="text-block">
              <h3><span class="icon-share"></span>Map Form</h3>One of the two general forms that jQuery methods take is referred to here as the "map form". This leverages the jQuery helper methods <code>jQuery.map</code> or <code>jQuery.fn.map</code> to alter each element in the jQuery object set. This is the form with which our work is predominantly concerned due to the way it promotes operations on elements without side effects.
            </div>
          </div>
          <div id="each-form-content" class="span6">
            <div class="text-block">
              <h3><span class="icon-edit"></span>Each Form</h3>The second of the two forms that one might find underlying jQuery methods is the "each form". Here side effects are the order of the day as there is no expectation that the element provided to the callback will be returned, Figure 5. The standard and optimizations described here can also be applied with this form because of JavaScript's pass by reference nature where objects are concerned. Unfortunately composition becomes impossible and the category definitions will not apply in those cases.
            </div>
          </div>
        </div>
        <div class="row-fluid">
          <div id="map-form" class="span6">
            <pre class="prettyprint linenums">
$.map( <span class="builtin">this</span>, <span class="keyword">function</span>( <span class="js2-function-param">elem</span>, <span class="js2-function-param">i</span> ){
  <span class="comment">// manipulate HTMLElement
</span>  <span class="keyword">return</span> elem;
});<div class="figure">Figure 4</div>
</pre>
          </div>
          <div id="each-form" class="span6">
            <pre class="prettyprint linenums">
$.each( <span class="builtin">this</span>, <span class="keyword">function</span>( <span class="js2-function-param">elem</span>, <span class="js2-function-param">i</span> ){
  <span class="comment">// manipulate HTMLElement
</span>});
<div class="figure">Figure 5</div>
</pre>
          </div>
        </div>
        <div class="row-fluid">
          <div class="text-block span6">
            <h3>When to Optimize?</h3>
Given that many of jQuery's core methods and the thriving plugin ecosystem that accompanies them leverage these forms [!! - possible list them in a figure] there is likely great value in identifying ways to reduce the full number of set itterations made when they are used in chains. Unfortunately the source that makes up these methods is often complex even from the implementors perspective so a rigorous definition of which can be targetted for optimization has value. For that purpose we turn to some rudimentary category theory.
          </div>
          <div class="text-block span6">
            <h3>jQuery Itterative Methods</h3> TODO show some percentage of the jQuery api that is itterative. Pie chart?
          </div>
        </div>
      </div>
      <div id="middle">
        <div class="row-fluid">
          <h2 class="span12">Categorically Identifiable</h2>
        </div>
        <div class="row-fluid border-right">
          <div id="html" class="span6 text-block">
            <img src="img/html5-logo-512.png" id="html-logo"></img>
            <h3><span class="icon-check"></span>Defining Html</h3>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut scelerisque nulla ut neque pharetra commodo. Fusce sed aliquet odio. Praesent id augue in nisl commodo interdum ac id orci. Integer nec nisl tellus, eu lacinia mauris. Nulla nec urna nibh, quis luctus leo. Nullam eget sapien eu ipsum molestie tristique eget id ligula. Integer lacus massa, adipiscing sed dictum vitae, laoreet non est. Integer adipiscing aliquam ultrices. Pellentesque aliquet, tellus non volutpat tempor, nunc nisi sagittis tortor, vel porttitor odio lorem non metus. Praesent malesuada metus sed libero malesuada eleifend vestibulum nibh facilisis.

Sed lobortis interdum mauris eget porttitor. Vivamus vehicula faucibus enim ac tristique. Ut dictum tempor tortor, sit amet eleifend nisl eleifend ac. Nulla dapibus lacus sit amet sapien pharetra sed posuere nibh cursus. Donec ornare sem nec velit viverra imperdiet. Ut eget purus at metus vestibulum tristique quis id diam. Donec cursus fringilla libero, vel euismod orci semper non. Ut non sem quis urna semper adipiscing. Vestibulum est velit, consectetur non pharetra non, dictum et lorem. Praesent vehicula hendrerit magna, posuere accumsan tellus feugiat at.

Sed rutrum, purus ac dictum rutrum, nisi elit mollis erat, eget eleifend massa magna ac nulla. Nulla at vehicula augue. Aenean pulvinar ultricies elit, nec vehicula felis pretium non. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Sed sit amet massa quam. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Fusce lobortis nulla in risus convallis hendrerit auctor risus dapibus. Etiam a ipsum quis ipsum laoreet congue. Phasellus scelerisque hendrerit varius. Cras congue nibh non tortor commodo eu suscipit diam fringilla. Curabitur magna dui, vehicula sed euismod vel, pulvinar quis ipsum. Nullam suscipit volutpat neque a fermentum. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nunc ac risus purus. In volutpat, mi sit amet sodales interdum, diam nisl cursus nisi, vitae imperdiet ligula risus ac sem. Ut sodales, augue vel viverra tempus, neque libero euismod diam, et condimentum nunc ante at mauris.
          </div>
          <div id="jqry" class="span6 text-block">
            <img src="img/jquery-logo-320.png" id="jqry-logo"></img>
            <h3><span class="icon-check"></span>Defining Jqry</h3>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut scelerisque nulla ut neque pharetra commodo. Fusce sed aliquet odio. Praesent id augue in nisl commodo interdum ac id orci. Integer nec nisl tellus, eu lacinia mauris. Nulla nec urna nibh, quis luctus leo. Nullam eget sapien eu ipsum molestie tristique eget id ligula. Integer lacus massa, adipiscing sed dictum vitae, laoreet non est. Integer adipiscing aliquam ultrices. Pellentesque aliquet, tellus non volutpat tempor, nunc nisi sagittis tortor, vel porttitor odio lorem non metus. Praesent malesuada metus sed libero malesuada eleifend vestibulum nibh facilisis.

Sed lobortis interdum mauris eget porttitor. Vivamus vehicula faucibus enim ac tristique. Ut dictum tempor tortor, sit amet eleifend nisl eleifend ac. Nulla dapibus lacus sit amet sapien pharetra sed posuere nibh cursus. Donec ornare sem nec velit viverra imperdiet. Ut eget purus at metus vestibulum tristique quis id diam. Donec cursus fringilla libero, vel euismod orci semper non. Ut non sem quis urna semper adipiscing. Vestibulum est velit, consectetur non pharetra non, dictum et lorem. Praesent vehicula hendrerit magna, posuere accumsan tellus feugiat at.

Sed rutrum, purus ac dictum rutrum, nisi elit mollis erat, eget eleifend massa magna ac nulla. Nulla at vehicula augue. Aenean pulvinar ultricies elit, nec vehicula felis pretium non. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Sed sit amet massa quam. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Fusce lobortis nulla in risus convallis hendrerit auctor risus dapibus. Etiam a ipsum quis ipsum laoreet congue. Phasellus scelerisque hendrerit varius. Cras congue nibh non tortor commodo eu suscipit diam fringilla. Curabitur magna dui, vehicula sed euismod vel, pulvinar quis ipsum. Nullam suscipit volutpat neque a fermentum. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nunc ac risus purus. In volutpat, mi sit amet sodales interdum, diam nisl cursus nisi, vitae imperdiet ligula risus ac sem. Ut sodales, augue vel viverra tempus, neque libero euismod diam, et condimentum nunc ante at mauris.
          </div>
        </div>
        <div class="row-fluid border-left">
          <div id="functor" class="span12 text-block">
            <h3><span class="icon-check"></span>Defining a Functor</h3>
          </div>
        </div>
        <div class="row-fluid border-left">
          <div id="functor-law-fusion" class="span12 text-block">
            <h3><span class="icon-random"></span>Fuse with Confidence</h3>
          </div>
        </div>
      </div>
      <div id="right">
        <div class="row-fluid">
          <h2 class="span12">Automatically <span class="label label-warning">Warning</span> the User</h2>
        </div>
      </div>
    </div>
  </body>
</html>
